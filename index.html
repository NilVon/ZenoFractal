<script>
    // Particles Animation
    const numParticles = 20;
    const particles = [];

    for (let i = 0; i < numParticles; i++) {
        let particle = document.createElement("div");
        particle.classList.add("particle");
        document.body.appendChild(particle);

        let x = Math.random() * window.innerWidth;
        let y = Math.random() * window.innerHeight;
        let speedX = (Math.random() - 0.5) * 2;
        let speedY = (Math.random() - 0.5) * 2;

        particles.push({ element: particle, x, y, speedX, speedY });
    }

    function updateParticles() {
        particles.forEach(p => {
            p.x += p.speedX;
            p.y += p.speedY;
            if (p.x <= 0 || p.x >= window.innerWidth) p.speedX *= -1;
            if (p.y <= 0 || p.y >= window.innerHeight) p.speedY *= -1;
            p.element.style.transform = `translate(${p.x}px, ${p.y}px)`;
        });

        requestAnimationFrame(updateParticles);
    }

    updateParticles();

    // Logo Glitch Effect
    const logo = document.getElementById("logo");
    logo.addEventListener("click", () => {
        logo.classList.add("glitch");
        setTimeout(() => logo.classList.remove("glitch"), 400);
    });

    // Chatbot Toggle
    const chatbotOrb = document.getElementById("chatbot-orb");
    const chatContainer = document.getElementById("chat-container");
    const chatHeader = document.getElementById("chat-header");

    chatbotOrb.addEventListener("click", () => {
        chatContainer.style.display = chatContainer.style.display === "block" ? "none" : "block";
    });

    chatHeader.addEventListener("click", () => {
        chatContainer.style.display = "none";
    });

    // Chatbot Responses
    const chatInput = document.getElementById("chat-input");
    const chatContent = document.getElementById("chat-content");

    const responses = {
        "what is zenofractal": "ZenoFractal is where futuristic digital solutions meet excellence. ðŸš€",
        "what services do you offer": "We specialize in **branding, web development, video editing, and beyond**. âš¡",
        "how can zenofractal help my business": "We provide **top-tier branding, design, and digital services** to give your business an unbeatable edge. ðŸŒŸ",
        "why choose zenofractal": "Because we combine **expertise, innovation, and high-quality execution** to ensure your project stands out. ðŸ”¥",
        "how do i get started": "Just reach out, and weâ€™ll craft a **custom digital solution** tailored to your needs. ðŸ’¡",
        "who are you": "I am ZenoBot, your AI guide to all things ZenoFractal. ðŸ¤–",
        "where does the future lead": "With ZenoFractal, the future leads to **limitless possibilities** in digital innovation. ðŸš€",
        "hello": "Hey there! Ready to experience next-level digital services? ðŸ‘‹"
    };

    chatInput.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            let userInput = chatInput.value.toLowerCase().trim();
            chatInput.value = "";
            let botResponse = responses[userInput] || "Let's talk about how ZenoFractal can help. ðŸ¤”";
            chatContent.innerHTML += `<p><strong>You:</strong> ${userInput}</p>`;
            chatContent.innerHTML += `<p><strong>ZenoBot:</strong> ${botResponse}</p>`;
            chatContent.scrollTop = chatContent.scrollHeight;
        }
    });

    // ðŸŽ¤ Voice Recognition & Speech Output
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.continuous = false;
    recognition.lang = "en-US";

    // ðŸŽ™ï¸ When User Presses and Holds the Orb
    chatbotOrb.addEventListener("mousedown", () => {
        recognition.start();
        chatbotOrb.style.transform = "scale(1.2)";
    });

    chatbotOrb.addEventListener("mouseup", () => {
        recognition.stop();
        chatbotOrb.style.transform = "scale(1)";
    });

    // ðŸŽ¤ Process Speech Input
    recognition.onresult = function (event) {
        let userInput = event.results[0][0].transcript.toLowerCase().trim();
        chatContent.innerHTML += `<p><strong>You:</strong> ${userInput}</p>`;

        let botResponse = responses[userInput] || "Interesting! Letâ€™s talk about how ZenoFractal can help. ðŸ¤”";

        chatContent.innerHTML += `<p><strong>ZenoBot:</strong> ${botResponse}</p>`;
        chatContent.scrollTop = chatContent.scrollHeight;

        speak(botResponse); // ðŸ”Š Speak Response
    };

    // ðŸ”Š Text-to-Speech Function
    function speak(text) {
        const speech = new SpeechSynthesisUtterance();
        speech.text = text;
        speech.volume = 1;
        speech.rate = 1;
        speech.pitch = 1;
        window.speechSynthesis.speak(speech);
    }
</script>
